import{x as V,r as P,h as C,o as p,w as f,a as t,b as o,u as s,g as h,S as v,e as g,t as b,d as B,c as x,f as y}from"./app-BevKeGvV.js";import{_ as N}from"./AppLayout-BhWm1ZWu.js";import{P as U}from"./PageFooter-Cwmg75JN.js";import{_ as i}from"./InputError-Chtgfdjr.js";import{_ as m}from"./InputLabel-BHWlRqFg.js";import{_ as c}from"./TextInput-DnZp7P75.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"flex flex-col min-h-screen"},A={class:"flex-1"},D={class:"mb-6"},E={class:"flex items-center gap-4"},F={class:"text-sm mt-1",style:{color:"var(--color-text-secondary)"}},I={class:"card rounded-lg shadow-sm p-6 max-w-2xl"},S={key:0,class:"mt-2 mb-4"},j=["src","alt"],$={key:1,class:"mt-4"},z=["src"],G={class:"flex items-center gap-4 pt-4"},M=["disabled"],K={__name:"Edit",props:{producto:Object,visitCount:Number},setup(a){const n=a,r=V({nombre:n.producto.nombre,costo:n.producto.costo,precio_venta:n.producto.precio_venta,stock:n.producto.stock,imagen:null}),u=P(n.producto.imagen_url||null);function k(d){const e=d.target.files[0];if(e){r.imagen=e;const l=new FileReader;l.onload=w=>{u.value=w.target.result},l.readAsDataURL(e)}}function _(){r.transform(d=>({...d,_method:"PUT"})).post(route("restaurant.productos.update",n.producto.id),{forceFormData:!0})}return(d,e)=>(p(),C(N,null,{default:f(()=>[t(s(h),{title:"Editar Producto - Restaurante"}),o("div",q,[o("div",A,[o("div",D,[o("div",E,[t(s(v),{href:d.route("restaurant.productos.index"),class:"text-2xl hover:opacity-75"},{default:f(()=>e[4]||(e[4]=[g(" ← ")])),_:1},8,["href"]),o("div",null,[e[5]||(e[5]=o("h1",{class:"text-3xl font-bold",style:{color:"var(--color-text-primary)"}},"Editar Producto",-1)),o("p",F," Actualiza la información de "+b(a.producto.nombre),1)])])]),o("div",I,[o("form",{onSubmit:B(_,["prevent"]),class:"space-y-6"},[o("div",null,[t(m,{for:"nombre",value:"Nombre del producto *"}),t(c,{id:"nombre",modelValue:s(r).nombre,"onUpdate:modelValue":e[0]||(e[0]=l=>s(r).nombre=l),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),t(i,{class:"mt-2",message:s(r).errors.nombre},null,8,["message"])]),o("div",null,[t(m,{for:"costo",value:"Costo de producción (Bs.) *"}),t(c,{id:"costo",modelValue:s(r).costo,"onUpdate:modelValue":e[1]||(e[1]=l=>s(r).costo=l),type:"number",step:"0.01",min:"0",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(i,{class:"mt-2",message:s(r).errors.costo},null,8,["message"])]),o("div",null,[t(m,{for:"precio_venta",value:"Precio de venta (Bs.) *"}),t(c,{id:"precio_venta",modelValue:s(r).precio_venta,"onUpdate:modelValue":e[2]||(e[2]=l=>s(r).precio_venta=l),type:"number",step:"0.01",min:"0",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),e[6]||(e[6]=o("p",{class:"text-xs mt-1",style:{color:"var(--color-text-secondary)"}}," Debe ser mayor que el costo de producción ",-1)),t(i,{class:"mt-2",message:s(r).errors.precio_venta},null,8,["message"])]),o("div",null,[t(m,{for:"stock",value:"Stock *"}),t(c,{id:"stock",modelValue:s(r).stock,"onUpdate:modelValue":e[3]||(e[3]=l=>s(r).stock=l),type:"number",step:"0.01",min:"0",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),e[7]||(e[7]=o("p",{class:"text-xs mt-1",style:{color:"var(--color-text-secondary)"}}," Control manual del stock ",-1)),t(i,{class:"mt-2",message:s(r).errors.stock},null,8,["message"])]),o("div",null,[t(m,{for:"imagen",value:"Imagen del Producto (Opcional)"}),a.producto.imagen_url&&!u.value?(p(),x("div",S,[e[8]||(e[8]=o("p",{class:"text-sm font-medium mb-2"},"Imagen Actual:",-1)),o("img",{src:a.producto.imagen_url,alt:a.producto.nombre,class:"w-48 h-48 object-cover rounded-lg shadow-md"},null,8,j)])):y("",!0),o("input",{id:"imagen",type:"file",accept:"image/*",onChange:k,class:"mt-1 block w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"}},null,32),e[10]||(e[10]=o("p",{class:"text-xs text-gray-500 mt-1"},"Formatos: JPG, PNG, GIF, WEBP. Máximo 2MB. Dejar vacío para mantener la imagen actual.",-1)),u.value&&u.value!==a.producto.imagen_url?(p(),x("div",$,[e[9]||(e[9]=o("p",{class:"text-sm font-medium mb-2"},"Nueva Imagen:",-1)),o("img",{src:u.value,alt:"Preview",class:"w-48 h-48 object-cover rounded-lg shadow-md"},null,8,z)])):y("",!0),t(i,{class:"mt-2",message:s(r).errors.imagen},null,8,["message"])]),o("div",G,[o("button",{type:"submit",class:"btn-primary px-6 py-2 rounded-lg font-medium transition",disabled:s(r).processing},b(s(r).processing?"Actualizando...":"Actualizar Producto"),9,M),t(s(v),{href:d.route("restaurant.productos.index"),class:"px-6 py-2 rounded-lg font-medium transition",style:{"background-color":"var(--color-border)",color:"var(--color-text-primary)"}},{default:f(()=>e[11]||(e[11]=[g(" Cancelar ")])),_:1},8,["href"])])],32)])]),t(U,{visitCount:a.visitCount},null,8,["visitCount"])])]),_:1}))}};export{K as default};
