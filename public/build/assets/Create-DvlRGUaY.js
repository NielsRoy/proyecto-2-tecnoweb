import{x as _,r as C,h as V,o as m,w as c,a as l,b as o,u as r,g as k,S as v,e as g,d as U,c as p,f as P,j as F,F as h,p as N,t as w,G as B}from"./app-BevKeGvV.js";import{_ as S}from"./AppLayout-BhWm1ZWu.js";import{P as q}from"./PageFooter-Cwmg75JN.js";import{_ as t}from"./InputError-Chtgfdjr.js";import{_ as n}from"./InputLabel-BHWlRqFg.js";import{_ as u}from"./TextInput-DnZp7P75.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"flex flex-col min-h-screen"},R={class:"flex-1"},D={class:"mb-6"},G={class:"flex items-center gap-4"},$={class:"card rounded-lg shadow-sm p-6 max-w-2xl"},A={key:0,class:"mt-4"},j=["src"],E=["value"],I={class:"flex items-center gap-4 pt-4"},L=["disabled"],Q={__name:"Create",props:{roles:Array,visitCount:Number},setup(f){const s=_({name:"",email:"",password:"",password_confirmation:"",role:"cliente",foto:null}),i=C(null);function x(d){const e=d.target.files[0];if(e){s.foto=e;const a=new FileReader;a.onload=y=>{i.value=y.target.result},a.readAsDataURL(e)}}function b(){s.post(route("restaurant.users.store"),{forceFormData:!0,onSuccess:()=>{s.reset(),i.value=null}})}return(d,e)=>(m(),V(S,null,{default:c(()=>[l(r(k),{title:"Crear Usuario - Restaurante"}),o("div",M,[o("div",R,[o("div",D,[o("div",G,[l(r(v),{href:d.route("restaurant.users.index"),class:"text-2xl hover:opacity-75"},{default:c(()=>e[5]||(e[5]=[g(" ← ")])),_:1},8,["href"]),e[6]||(e[6]=o("div",null,[o("h1",{class:"text-3xl font-bold",style:{color:"var(--color-text-primary)"}},"Crear Usuario"),o("p",{class:"text-sm mt-1",style:{color:"var(--color-text-secondary)"}}," Registra un nuevo usuario en el sistema ")],-1))])]),o("div",$,[o("form",{onSubmit:U(b,["prevent"]),class:"space-y-6"},[o("div",null,[l(n,{for:"name",value:"Nombre completo *"}),l(u,{id:"name",modelValue:r(s).name,"onUpdate:modelValue":e[0]||(e[0]=a=>r(s).name=a),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),l(t,{class:"mt-2",message:r(s).errors.name},null,8,["message"])]),o("div",null,[l(n,{for:"email",value:"Correo electrónico *"}),l(u,{id:"email",modelValue:r(s).email,"onUpdate:modelValue":e[1]||(e[1]=a=>r(s).email=a),type:"email",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(t,{class:"mt-2",message:r(s).errors.email},null,8,["message"])]),o("div",null,[l(n,{for:"password",value:"Contraseña *"}),l(u,{id:"password",modelValue:r(s).password,"onUpdate:modelValue":e[2]||(e[2]=a=>r(s).password=a),type:"password",class:"mt-1 block w-full",required:"",autocomplete:"new-password"},null,8,["modelValue"]),e[7]||(e[7]=o("p",{class:"text-xs mt-1",style:{color:"var(--color-text-secondary)"}}," Mínimo 8 caracteres ",-1)),l(t,{class:"mt-2",message:r(s).errors.password},null,8,["message"])]),o("div",null,[l(n,{for:"password_confirmation",value:"Confirmar contraseña *"}),l(u,{id:"password_confirmation",modelValue:r(s).password_confirmation,"onUpdate:modelValue":e[3]||(e[3]=a=>r(s).password_confirmation=a),type:"password",class:"mt-1 block w-full",required:"",autocomplete:"new-password"},null,8,["modelValue"]),l(t,{class:"mt-2",message:r(s).errors.password_confirmation},null,8,["message"])]),o("div",null,[l(n,{for:"foto",value:"Foto de Perfil (Opcional)"}),o("input",{id:"foto",type:"file",accept:"image/*",onChange:x,class:"mt-1 block w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"}},null,32),e[9]||(e[9]=o("p",{class:"text-xs text-gray-500 mt-1"},"Formatos: JPG, PNG, GIF, WEBP. Máximo 2MB",-1)),i.value?(m(),p("div",A,[e[8]||(e[8]=o("p",{class:"text-sm font-medium mb-2"},"Vista Previa:",-1)),o("img",{src:i.value,alt:"Preview",class:"w-32 h-32 object-cover rounded-full shadow-md"},null,8,j)])):P("",!0),l(t,{class:"mt-2",message:r(s).errors.foto},null,8,["message"])]),o("div",null,[l(n,{for:"role",value:"Rol *"}),F(o("select",{id:"role","onUpdate:modelValue":e[4]||(e[4]=a=>r(s).role=a),class:"mt-1 block w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"},required:""},[(m(!0),p(h,null,N(f.roles,a=>(m(),p("option",{key:a.id,value:a.name},w(a.name.charAt(0).toUpperCase()+a.name.slice(1)),9,E))),128))],512),[[B,r(s).role]]),l(t,{class:"mt-2",message:r(s).errors.role},null,8,["message"])]),o("div",I,[o("button",{type:"submit",class:"btn-primary px-6 py-2 rounded-lg font-medium transition",disabled:r(s).processing},w(r(s).processing?"Creando...":"Crear Usuario"),9,L),l(r(v),{href:d.route("restaurant.users.index"),class:"px-6 py-2 rounded-lg font-medium transition",style:{"background-color":"var(--color-border)",color:"var(--color-text-primary)"}},{default:c(()=>e[10]||(e[10]=[g(" Cancelar ")])),_:1},8,["href"])])],32)])]),l(q,{visitCount:f.visitCount},null,8,["visitCount"])])]),_:1}))}};export{Q as default};
