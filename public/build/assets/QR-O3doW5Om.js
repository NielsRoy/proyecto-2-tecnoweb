import{_ as m}from"./AppLayout-D8U70Zno.js";import{r as g,A as p,h as f,o as _,w as b,a as x,b as s,u as h,g as w,t as i,K as l}from"./app-WIpr5u10.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const k={class:"text-center mt-10"},v={class:"text-3xl font-bold mb-6"},P=["src"],T={class:"text-xl mt-6"},C={__name:"QR",props:{lnNroTran:String,laQrImage:String,credito_id:Number},setup(r){const n=r,a=g("Consultando estado...");async function d(t){let e=1;for(;e===1;){const o=(await l.post(route("restaurant.pagos.consultar"),{pagofacilTransactionId:t})).data;if(console.log("üîç Estado recibido:",o),o.error){a.value="‚ùå "+o.message;break}let c=o.values.paymentStatus??1;switch(c){case 1:a.value="‚è≥ Pendiente de pago...";break;case 2:a.value="‚úÖ Pago realizado correctamente";break;case 3:a.value="‚ùå Pago cancelado";break;case 4:a.value="‚åõ Pago expirado";break;case 5:a.value="‚è≥ Pago en revisi√≥n...";break}if(e=c,e===2){await l.post(route("restaurant.pagos.completar"),{transaccion:t,credito_id:n.credito_id}),window.location.href=route("restaurant.pagos.success",{transaccion:t});break}if([3,4,5].includes(e))break;await new Promise(u=>setTimeout(u,3e3))}}return p(()=>d(n.lnNroTran)),(t,e)=>(_(),f(m,null,{default:b(()=>[x(h(w),{title:"Pago QR"}),s("div",k,[s("h2",v,"Transacci√≥n: "+i(r.lnNroTran),1),s("img",{src:r.laQrImage,class:"w-80 mx-auto shadow rounded-xl"},null,8,P),s("p",T,i(a.value),1)])]),_:1}))}};export{C as default};
