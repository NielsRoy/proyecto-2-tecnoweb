import{r as c,h as C,o as s,w as g,a as u,b as e,u as p,g as N,j as m,G as S,c as l,F as b,p as h,t as r,H as M,S as w,e as T,f as k,n as V,z as A}from"./app-B3--_BYh.js";import{_ as D}from"./AppLayout-DuKiVIcH.js";import{P as B}from"./PageFooter-CCNwdcBR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"flex flex-col min-h-screen"},L={class:"flex-1"},U={class:"card rounded-lg shadow-sm p-6 mb-6"},E={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4"},G=["value"],z={class:"flex gap-2"},O={class:"card rounded-lg shadow-sm overflow-hidden"},P={class:"overflow-x-auto"},R={class:"w-full"},$={class:"px-6 py-4 whitespace-nowrap"},q={class:"px-6 py-4"},J={class:"font-medium"},K={key:0,class:"text-xs",style:{color:"var(--color-text-secondary)"}},Q={class:"px-6 py-4 whitespace-nowrap text-sm"},W={class:"px-6 py-4 whitespace-nowrap text-sm"},X={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Y=["title"],Z={class:"px-6 py-4 whitespace-nowrap text-sm"},ee={class:"px-6 py-4 whitespace-nowrap text-sm"},te=["onClick"],oe={key:0},se={key:0,class:"px-6 py-4 border-t",style:{"border-color":"var(--color-border)"}},re={class:"flex flex-wrap gap-1"},de={__name:"Index",props:{movimientos:Object,insumos:Array,filters:Object,visitCount:Number},setup(n){const i=n,x=c(i.filters.tipo||""),v=c(i.filters.insumo_id||""),y=c(i.filters.fecha_desde||""),f=c(i.filters.fecha_hasta||"");function d(){A.get(route("restaurant.movimientos.index"),{tipo:x.value,insumo_id:v.value,fecha_desde:y.value,fecha_hasta:f.value},{preserveState:!0,preserveScroll:!0})}function j(a){confirm("Â¿EstÃ¡s seguro de que deseas archivar este movimiento?")&&A.delete(route("restaurant.movimientos.destroy",a))}function H(a){return{Ingreso:"bg-green-100 text-green-800",Salida:"bg-red-100 text-red-800",Ajuste:"bg-yellow-100 text-yellow-800"}[a]||"bg-gray-100 text-gray-800"}function I(a){return new Date(a).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}return(a,t)=>(s(),C(D,null,{default:g(()=>[u(p(N),{title:"GestiÃ³n de Movimientos - Restaurante"}),e("div",F,[e("div",L,[t[14]||(t[14]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold",style:{color:"var(--color-text-primary)"}},"GestiÃ³n de Movimientos"),e("p",{class:"text-sm mt-1",style:{color:"var(--color-text-secondary)"}}," Historial de movimientos de inventario ")],-1)),e("div",U,[e("div",E,[e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"}}," Tipo ",-1)),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>x.value=o),onChange:d,class:"w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"}},t[4]||(t[4]=[e("option",{value:""},"Todos",-1),e("option",{value:"Ingreso"},"Ingreso",-1),e("option",{value:"Salida"},"Salida",-1),e("option",{value:"Ajuste"},"Ajuste",-1)]),544),[[S,x.value]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"}}," Insumo ",-1)),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>v.value=o),onChange:d,class:"w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"}},[t[6]||(t[6]=e("option",{value:""},"Todos",-1)),(s(!0),l(b,null,h(n.insumos,o=>(s(),l("option",{key:o.id,value:o.id},r(o.nombre),9,G))),128))],544),[[S,v.value]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"}}," Desde ",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>y.value=o),onChange:d,type:"date",class:"w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"}},null,544),[[M,y.value]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium mb-2",style:{color:"var(--color-text-primary)"}}," Hasta ",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>f.value=o),onChange:d,type:"date",class:"w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"}},null,544),[[M,f.value]])])]),e("div",z,[u(p(w),{href:a.route("restaurant.movimientos.create"),class:"btn-primary px-6 py-2 rounded-lg font-medium transition whitespace-nowrap"},{default:g(()=>t[10]||(t[10]=[T(" + Registrar Movimiento ")])),_:1},8,["href"]),u(p(w),{href:a.route("restaurant.movimientos.archived"),class:"px-6 py-2 rounded-lg font-medium transition whitespace-nowrap",style:{"background-color":"var(--color-border)",color:"var(--color-text-primary)"}},{default:g(()=>t[11]||(t[11]=[T(" ðŸ“¦ Ver Archivados ")])),_:1},8,["href"])])]),e("div",O,[e("div",P,[e("table",R,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Tipo"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Insumo"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Cantidad"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Stock Ant."),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Stock Nuevo"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Motivo"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Fecha/Hora"),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"},"Acciones")])],-1)),e("tbody",null,[(s(!0),l(b,null,h(n.movimientos.data,o=>(s(),l("tr",{key:o.id,class:"border-t",style:{"border-color":"var(--color-border)"}},[e("td",$,[e("span",{class:V([H(o.tipo),"px-2 py-1 text-xs font-semibold rounded-full"])},r(o.tipo),3)]),e("td",q,[e("div",J,r(o.insumo.nombre),1),o.insumo.marca?(s(),l("div",K,r(o.insumo.marca.nombre),1)):k("",!0)]),e("td",Q,r(o.cantidad)+" "+r(o.insumo.unidad_medida),1),e("td",W,r(o.stock_anterior),1),e("td",X,r(o.stock_nuevo),1),e("td",{class:"px-6 py-4 text-sm max-w-xs truncate",title:o.motivo},r(o.motivo),9,Y),e("td",Z,r(I(o.created_at)),1),e("td",ee,[e("button",{onClick:_=>j(o.id),class:"text-red-600 hover:text-red-800 font-medium"}," Archivar ",8,te)])]))),128)),n.movimientos.data.length===0?(s(),l("tr",oe,t[12]||(t[12]=[e("td",{colspan:"8",class:"px-6 py-8 text-center text-gray-500"}," No se encontraron movimientos ",-1)]))):k("",!0)])])]),n.movimientos.links.length>3?(s(),l("div",se,[e("div",re,[(s(!0),l(b,null,h(n.movimientos.links,(o,_)=>(s(),C(p(w),{key:_,href:o.url,class:V(["px-3 py-1 rounded",o.active?"btn-primary":"bg-gray-200 hover:bg-gray-300"]),innerHTML:o.label,disabled:!o.url},null,8,["href","class","innerHTML","disabled"]))),128))])])):k("",!0)])]),u(B,{visitCount:n.visitCount},null,8,["visitCount"])])]),_:1}))}};export{de as default};
