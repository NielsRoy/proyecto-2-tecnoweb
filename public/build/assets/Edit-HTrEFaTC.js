import{x as k,r as C,h as U,o as i,w as v,a as r,b as o,u as s,g as F,S as x,e as y,t as g,d as N,c as p,f as b,j as P,F as A,p as j,G as B}from"./app-WIpr5u10.js";import{_ as D}from"./AppLayout-D8U70Zno.js";import{P as E}from"./PageFooter-CFCpgnrU.js";import{_ as d}from"./InputError-DqZBcfNI.js";import{_ as m}from"./InputLabel-Cn-mf5My.js";import{_ as f}from"./TextInput-BMH7xKuV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"flex flex-col min-h-screen"},S={class:"flex-1"},G={class:"mb-6"},R={class:"flex items-center gap-4"},$={class:"text-sm mt-1",style:{color:"var(--color-text-secondary)"}},q={class:"card rounded-lg shadow-sm p-6 max-w-2xl"},z={key:0},I={key:0,class:"mt-2 mb-4"},L=["src","alt"],O={key:1,class:"mt-4"},T=["src"],J=["value"],W={class:"flex items-center gap-4 pt-4"},H=["disabled"],se={__name:"Edit",props:{user:Object,roles:Array,visitCount:Number},setup(l){var w;const u=l,a=k({name:u.user.name,email:u.user.email,password:"",password_confirmation:"",role:((w=u.user.roles[0])==null?void 0:w.name)||"cliente",foto:null}),c=C(u.user.profile_photo_path||null);function _(n){const e=n.target.files[0];if(e){a.foto=e;const t=new FileReader;t.onload=V=>{c.value=V.target.result},t.readAsDataURL(e)}}function h(){a.transform(n=>({...n,_method:"PUT"})).post(route("restaurant.users.update",u.user.id),{forceFormData:!0})}return(n,e)=>(i(),U(D,null,{default:v(()=>[r(s(F),{title:"Editar Usuario - Restaurante"}),o("div",M,[o("div",S,[o("div",G,[o("div",R,[r(s(x),{href:n.route("restaurant.users.index"),class:"text-2xl hover:opacity-75"},{default:v(()=>e[5]||(e[5]=[y(" ← ")])),_:1},8,["href"]),o("div",null,[e[6]||(e[6]=o("h1",{class:"text-3xl font-bold",style:{color:"var(--color-text-primary)"}},"Editar Usuario",-1)),o("p",$," Actualiza la información de "+g(l.user.name),1)])])]),o("div",q,[o("form",{onSubmit:N(h,["prevent"]),class:"space-y-6"},[o("div",null,[r(m,{for:"name",value:"Nombre completo *"}),r(f,{id:"name",modelValue:s(a).name,"onUpdate:modelValue":e[0]||(e[0]=t=>s(a).name=t),type:"text",class:"mt-1 block w-full",required:"",autofocus:""},null,8,["modelValue"]),r(d,{class:"mt-2",message:s(a).errors.name},null,8,["message"])]),o("div",null,[r(m,{for:"email",value:"Correo electrónico *"}),r(f,{id:"email",modelValue:s(a).email,"onUpdate:modelValue":e[1]||(e[1]=t=>s(a).email=t),type:"email",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),r(d,{class:"mt-2",message:s(a).errors.email},null,8,["message"])]),o("div",null,[r(m,{for:"password",value:"Nueva contraseña"}),r(f,{id:"password",modelValue:s(a).password,"onUpdate:modelValue":e[2]||(e[2]=t=>s(a).password=t),type:"password",class:"mt-1 block w-full",autocomplete:"new-password"},null,8,["modelValue"]),e[7]||(e[7]=o("p",{class:"text-xs mt-1",style:{color:"var(--color-text-secondary)"}}," Dejar en blanco para mantener la contraseña actual. Mínimo 8 caracteres si deseas cambiarla. ",-1)),r(d,{class:"mt-2",message:s(a).errors.password},null,8,["message"])]),s(a).password?(i(),p("div",z,[r(m,{for:"password_confirmation",value:"Confirmar nueva contraseña"}),r(f,{id:"password_confirmation",modelValue:s(a).password_confirmation,"onUpdate:modelValue":e[3]||(e[3]=t=>s(a).password_confirmation=t),type:"password",class:"mt-1 block w-full",autocomplete:"new-password"},null,8,["modelValue"]),r(d,{class:"mt-2",message:s(a).errors.password_confirmation},null,8,["message"])])):b("",!0),o("div",null,[r(m,{for:"foto",value:"Foto de Perfil (Opcional)"}),l.user.profile_photo_path&&!c.value?(i(),p("div",I,[e[8]||(e[8]=o("p",{class:"text-sm font-medium mb-2"},"Foto Actual:",-1)),o("img",{src:l.user.profile_photo_path,alt:l.user.name,class:"w-32 h-32 object-cover rounded-full shadow-md"},null,8,L)])):b("",!0),o("input",{id:"foto",type:"file",accept:"image/*",onChange:_,class:"mt-1 block w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"}},null,32),e[10]||(e[10]=o("p",{class:"text-xs text-gray-500 mt-1"},"Formatos: JPG, PNG, GIF, WEBP. Máximo 2MB. Dejar vacío para mantener la foto actual.",-1)),c.value&&c.value!==l.user.profile_photo_path?(i(),p("div",O,[e[9]||(e[9]=o("p",{class:"text-sm font-medium mb-2"},"Nueva Foto:",-1)),o("img",{src:c.value,alt:"Preview",class:"w-32 h-32 object-cover rounded-full shadow-md"},null,8,T)])):b("",!0),r(d,{class:"mt-2",message:s(a).errors.foto},null,8,["message"])]),o("div",null,[r(m,{for:"role",value:"Rol *"}),P(o("select",{id:"role","onUpdate:modelValue":e[4]||(e[4]=t=>s(a).role=t),class:"mt-1 block w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"},required:""},[(i(!0),p(A,null,j(l.roles,t=>(i(),p("option",{key:t.id,value:t.name},g(t.name.charAt(0).toUpperCase()+t.name.slice(1)),9,J))),128))],512),[[B,s(a).role]]),r(d,{class:"mt-2",message:s(a).errors.role},null,8,["message"])]),o("div",W,[o("button",{type:"submit",class:"btn-primary px-6 py-2 rounded-lg font-medium transition",disabled:s(a).processing},g(s(a).processing?"Actualizando...":"Actualizar Usuario"),9,H),r(s(x),{href:n.route("restaurant.users.index"),class:"px-6 py-2 rounded-lg font-medium transition",style:{"background-color":"var(--color-border)",color:"var(--color-text-primary)"}},{default:v(()=>e[11]||(e[11]=[y(" Cancelar ")])),_:1},8,["href"])])],32)])]),r(E,{visitCount:l.visitCount},null,8,["visitCount"])])]),_:1}))}};export{se as default};
