import{x as w,i as y,h as V,o as l,w as g,a,b as o,u as t,g as C,S as _,e as u,d as I,c as i,f as m,j as b,G as x,F as M,p as A,t as n,H as N}from"./app-WIpr5u10.js";import{_ as R}from"./AppLayout-D8U70Zno.js";import{P as j}from"./PageFooter-CFCpgnrU.js";import{_ as v}from"./InputError-DqZBcfNI.js";import{_ as p}from"./InputLabel-Cn-mf5My.js";import{_ as F}from"./TextInput-BMH7xKuV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"flex flex-col min-h-screen"},B={class:"flex-1"},D={class:"mb-6"},U={class:"flex items-center gap-4"},$={class:"card rounded-lg shadow-sm p-6 max-w-2xl"},E={class:"text-xs mt-1",style:{color:"var(--color-text-secondary)"}},T={key:0},L={key:1},P={key:2},G=["value"],H={key:0},z={key:0,class:"p-4 rounded-lg",style:{"background-color":"var(--color-bg-secondary)"}},J={class:"text-sm"},K={key:0,class:"text-xs mt-1",style:{color:"var(--color-text-secondary)"}},O={key:1,class:"mt-2 p-3 bg-red-100 border border-red-400 text-red-700 rounded"},Q={class:"flex items-center gap-4 pt-4"},W=["disabled"],ro={__name:"Create",props:{insumos:Array,visitCount:Number},setup(f){const k=f,e=w({tipo:"Ingreso",cantidad:"",motivo:"",insumo_id:""}),d=y(()=>e.insumo_id?k.insumos.find(c=>c.id===parseInt(e.insumo_id)):null),S=y(()=>e.tipo!=="Salida"||!d.value?!1:parseFloat(e.cantidad)>parseFloat(d.value.stock));function h(){e.post(route("restaurant.movimientos.store"),{onSuccess:()=>e.reset()})}return(c,s)=>(l(),V(R,null,{default:g(()=>[a(t(C),{title:"Registrar Movimiento - Restaurante"}),o("div",q,[o("div",B,[o("div",D,[o("div",U,[a(t(_),{href:c.route("restaurant.movimientos.index"),class:"text-2xl hover:opacity-75"},{default:g(()=>s[4]||(s[4]=[u(" ← ")])),_:1},8,["href"]),s[5]||(s[5]=o("div",null,[o("h1",{class:"text-3xl font-bold",style:{color:"var(--color-text-primary)"}},"Registrar Movimiento"),o("p",{class:"text-sm mt-1",style:{color:"var(--color-text-secondary)"}}," Registra un movimiento de inventario ")],-1))])]),o("div",$,[o("form",{onSubmit:I(h,["prevent"]),class:"space-y-6"},[o("div",null,[a(p,{for:"tipo",value:"Tipo de movimiento *"}),b(o("select",{id:"tipo","onUpdate:modelValue":s[0]||(s[0]=r=>t(e).tipo=r),class:"mt-1 block w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"},required:""},s[6]||(s[6]=[o("option",{value:"Ingreso"},"Ingreso",-1),o("option",{value:"Salida"},"Salida",-1),o("option",{value:"Ajuste"},"Ajuste",-1)]),512),[[x,t(e).tipo]]),o("p",E,[t(e).tipo==="Ingreso"?(l(),i("span",T,"Aumenta el stock del insumo")):t(e).tipo==="Salida"?(l(),i("span",L,"Disminuye el stock del insumo")):(l(),i("span",P,"Establece el stock a un valor específico"))]),a(v,{class:"mt-2",message:t(e).errors.tipo},null,8,["message"])]),o("div",null,[a(p,{for:"insumo_id",value:"Insumo *"}),b(o("select",{id:"insumo_id","onUpdate:modelValue":s[1]||(s[1]=r=>t(e).insumo_id=r),class:"mt-1 block w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"},required:""},[s[7]||(s[7]=o("option",{value:""},"Seleccione un insumo",-1)),(l(!0),i(M,null,A(f.insumos,r=>(l(),i("option",{key:r.id,value:r.id},[u(n(r.nombre)+" ",1),r.marca?(l(),i("span",H,"("+n(r.marca.nombre)+")",1)):m("",!0),u(" - Stock: "+n(r.stock)+" "+n(r.unidad_medida),1)],8,G))),128))],512),[[x,t(e).insumo_id]]),a(v,{class:"mt-2",message:t(e).errors.insumo_id},null,8,["message"])]),d.value?(l(),i("div",z,[o("div",J,[s[8]||(s[8]=o("strong",null,"Stock actual:",-1)),u(" "+n(d.value.stock)+" "+n(d.value.unidad_medida),1)])])):m("",!0),o("div",null,[a(p,{for:"cantidad",value:t(e).tipo==="Ajuste"?"Nuevo stock *":"Cantidad *"},null,8,["value"]),a(F,{id:"cantidad",modelValue:t(e).cantidad,"onUpdate:modelValue":s[2]||(s[2]=r=>t(e).cantidad=r),type:"number",step:"0.01",min:"0.01",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(e).tipo==="Ajuste"?(l(),i("p",K," Este será el nuevo stock del insumo ")):m("",!0),a(v,{class:"mt-2",message:t(e).errors.cantidad},null,8,["message"]),S.value?(l(),i("div",O," ⚠️ La cantidad excede el stock disponible ("+n(d.value.stock)+" "+n(d.value.unidad_medida)+") ",1)):m("",!0)]),o("div",null,[a(p,{for:"motivo",value:"Motivo *"}),b(o("textarea",{id:"motivo","onUpdate:modelValue":s[3]||(s[3]=r=>t(e).motivo=r),rows:"3",class:"mt-1 block w-full px-4 py-2 rounded-lg border",style:{"background-color":"var(--color-bg-secondary)","border-color":"var(--color-border)",color:"var(--color-text-primary)"},required:"",placeholder:"Describe el motivo del movimiento..."},null,512),[[N,t(e).motivo]]),a(v,{class:"mt-2",message:t(e).errors.motivo},null,8,["message"])]),o("div",Q,[o("button",{type:"submit",class:"btn-primary px-6 py-2 rounded-lg font-medium transition",disabled:t(e).processing},n(t(e).processing?"Registrando...":"Registrar Movimiento"),9,W),a(t(_),{href:c.route("restaurant.movimientos.index"),class:"px-6 py-2 rounded-lg font-medium transition",style:{"background-color":"var(--color-border)",color:"var(--color-text-primary)"}},{default:g(()=>s[9]||(s[9]=[u(" Cancelar ")])),_:1},8,["href"])])],32)])]),a(j,{visitCount:f.visitCount},null,8,["visitCount"])])]),_:1}))}};export{ro as default};
